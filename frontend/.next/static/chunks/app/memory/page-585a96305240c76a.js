(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[872],{5706:function(e,t,a){Promise.resolve().then(a.bind(a,66))},66:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(7437),r=a(2265),n=a(5085),i=a(3391),l=a(5802),c=a(7416),o=a(3577),d=a(6334),u=a(757);let h=e=>{let{data:t,onNodeClick:a,onNodeHover:h,height:m=600}=e,g=(0,r.useRef)(),[x,p]=(0,r.useState)(new Set),[b,y]=(0,r.useState)(new Set),[f,v]=(0,r.useState)(null),[j,w]=(0,r.useState)(null),N={person:"#3b82f6",document:"#10b981",event:"#f59e0b",task:"#8b5cf6",email:"#ef4444",note:"#6366f1"},k=j?{nodes:t.nodes.filter(e=>e.type===j),links:t.links.filter(e=>{let a=t.nodes.find(t=>t.id===e.source),s=t.nodes.find(t=>t.id===e.target);return(null==a?void 0:a.type)===j||(null==s?void 0:s.type)===j})}:t;return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute top-4 right-4 z-10 flex flex-col gap-2",children:(0,s.jsxs)(u.Zb,{padding:"sm",className:"flex flex-col gap-2",children:[(0,s.jsx)(d.z,{size:"sm",variant:"ghost",onClick:()=>{if(g.current){let e=g.current.zoom();g.current.zoom(1.3*e,400)}},children:(0,s.jsx)(i.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{size:"sm",variant:"ghost",onClick:()=>{if(g.current){let e=g.current.zoom();g.current.zoom(e/1.3,400)}},children:(0,s.jsx)(l.Z,{className:"w-4 h-4"})}),(0,s.jsx)(d.z,{size:"sm",variant:"ghost",onClick:()=>{g.current&&g.current.zoomToFit(400)},children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})})]})}),(0,s.jsx)("div",{className:"absolute top-4 left-4 z-10",children:(0,s.jsxs)(u.Zb,{padding:"sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Filter by type"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,s.jsx)("button",{onClick:()=>w(null),className:"px-2 py-1 text-xs rounded ".concat(j?"hover:bg-gray-100 dark:hover:bg-gray-800":"bg-gray-200 dark:bg-gray-700"),children:"All"}),Object.entries(N).map(e=>{let[t,a]=e;return(0,s.jsx)("button",{onClick:()=>w(t),className:"px-2 py-1 text-xs rounded capitalize ".concat(j===t?"bg-gray-200 dark:bg-gray-700":"hover:bg-gray-100 dark:hover:bg-gray-800"),style:{borderLeft:"3px solid ".concat(a)},children:t},t)})]})]})}),(0,s.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,s.jsx)(n.Z,{ref:g,graphData:k,nodeLabel:"label",nodeAutoColorBy:"type",nodeCanvasObject:(e,t,a)=>{let s=e.label,r=12/a;t.font="".concat(r,"px Sans-Serif");let n=[t.measureText(s).width,r].map(e=>e+.4*r);t.fillStyle=N[e.type]||"#94a3b8",t.beginPath(),t.arc(e.x,e.y,e.size||5,0,2*Math.PI,!1),t.fill(),(x.has(e.id)||(null==f?void 0:f.id)===e.id)&&(t.strokeStyle="#fbbf24",t.lineWidth=2/a,t.stroke()),t.textAlign="center",t.textBaseline="middle",t.fillStyle="rgba(0, 0, 0, 0.8)",t.fillRect(e.x-n[0]/2,e.y-n[1]/2+(e.size||5)+2,n[0],n[1]),t.fillStyle="#ffffff",t.fillText(s,e.x,e.y+(e.size||5)+2+r/2)},linkWidth:e=>b.has(e)?3:1,linkColor:e=>b.has(e)?"#fbbf24":"#94a3b8",linkDirectionalParticles:e=>b.has(e)?4:0,linkDirectionalParticleWidth:2,onNodeClick:e=>{v(e),a&&a(e)},onNodeHover:e=>{if(e){let a=new Set,s=new Set;t.links.forEach(t=>{t.source===e.id?(a.add(t.target),s.add(t)):t.target===e.id&&(a.add(t.source),s.add(t))}),p(a),y(s)}else p(new Set),y(new Set);h&&h(e)},width:window.innerWidth-100,height:m,cooldownTicks:100,onEngineStop:()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.zoomToFit(400)}})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(u.Zb,{padding:"sm",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-4",children:Object.entries(N).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a}}),(0,s.jsx)("span",{className:"text-sm capitalize",children:t})]},t)})})})})]})};var m=a(8711),g=a(9756),x=a(3227),p=a(2489);function b(){let[e,t]=(0,r.useState)({nodes:[],links:[]}),[a,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)(null);(0,r.useEffect)(()=>{c()},[]);let c=async()=>{try{let e=(await x.Z.getNodes()).map(e=>{var t,a,s;return{id:e.id,label:(null===(t=e.properties)||void 0===t?void 0:t.name)||e.label||"Untitled",type:(null===(s=e.labels)||void 0===s?void 0:null===(a=s[0])||void 0===a?void 0:a.toLowerCase())||"note",properties:e.properties,size:5}}),a=[];for(let t=0;t<e.length-1;t++)Math.random()>.5&&a.push({source:e[t].id,target:e[t+1].id,strength:Math.random()});t({nodes:e,links:a})}catch(e){console.error("Failed to load graph:",e)}finally{n(!1)}};return a?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,s.jsx)(g.$,{size:"lg"})}):(0,s.jsxs)("div",{className:"h-screen flex flex-col p-6 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Memory Graph"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Visualize and explore your Personal Memory Graph"})]}),(0,s.jsxs)("div",{className:"flex-1 flex gap-6",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(h,{data:e,onNodeClick:e=>{l(e)},height:600})}),i&&(0,s.jsxs)(u.Zb,{className:"w-80 flex-shrink-0",children:[(0,s.jsxs)(u.Ol,{className:"flex items-center justify-between",children:[(0,s.jsx)(u.ll,{children:"Node Details"}),(0,s.jsx)("button",{onClick:()=>l(null),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:(0,s.jsx)(p.Z,{className:"w-4 h-4"})})]}),(0,s.jsx)(u.aY,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Type"}),(0,s.jsx)(m.C,{className:"mt-1 capitalize",children:i.type})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Label"}),(0,s.jsx)("p",{className:"mt-1 font-medium",children:i.label})]}),i.properties&&Object.keys(i.properties).length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-500 mb-2 block",children:"Properties"}),(0,s.jsx)("div",{className:"space-y-2",children:Object.entries(i.properties).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-500",children:[t,":"]})," ",(0,s.jsx)("span",{className:"font-medium",children:String(a)})]},t)})})]})]})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)(u.Zb,{padding:"sm",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total Nodes"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.nodes.length})]}),(0,s.jsxs)(u.Zb,{padding:"sm",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total Links"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.links.length})]}),(0,s.jsxs)(u.Zb,{padding:"sm",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Node Types"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:new Set(e.nodes.map(e=>e.type)).size})]})]})]})}},8711:function(e,t,a){"use strict";a.d(t,{C:function(){return r}});var s=a(7437);a(2265);let r=e=>{let{children:t,variant:a="default",size:r="sm",className:n=""}=e;return(0,s.jsx)("span",{className:"inline-flex items-center font-medium rounded-full ".concat({default:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",success:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",error:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",info:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",outline:"bg-transparent border border-gray-300 text-gray-800 dark:border-gray-600 dark:text-gray-300",secondary:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}[a]," ").concat({sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm"}[r]," ").concat(n),children:t})}},6334:function(e,t,a){"use strict";a.d(t,{z:function(){return i}});var s=a(7437),r=a(2265);let n=(0,a(2163).j)("inline-flex items-center justify-center rounded-lg font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:"bg-primary-600 text-white hover:bg-primary-700 focus-visible:ring-primary-500",secondary:"bg-secondary-200 text-secondary-900 hover:bg-secondary-300 focus-visible:ring-secondary-500",outline:"border-2 border-primary-600 text-primary-600 hover:bg-primary-50 focus-visible:ring-primary-500",ghost:"text-secondary-700 hover:bg-secondary-100 focus-visible:ring-secondary-500",danger:"bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-500",success:"bg-green-600 text-white hover:bg-green-700 focus-visible:ring-green-500"},size:{sm:"h-9 px-3 text-sm",md:"h-10 px-4 text-base",lg:"h-11 px-6 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"primary",size:"md"}}),i=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,loading:l,leftIcon:c,rightIcon:o,children:d,disabled:u,...h}=e;return(0,s.jsxs)("button",{className:n({variant:r,size:i,className:a}),ref:t,disabled:u||l,...h,children:[l&&(0,s.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-label":"Loading",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!l&&c&&(0,s.jsx)("span",{className:"mr-2",children:c}),d,!l&&o&&(0,s.jsx)("span",{className:"ml-2",children:o})]})});i.displayName="Button"},757:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var s=a(7437),r=a(2265);let n=(0,a(2163).j)("rounded-lg border bg-white transition-shadow",{variants:{variant:{default:"border-gray-200 shadow-sm hover:shadow-md",elevated:"border-gray-200 shadow-md hover:shadow-lg",outlined:"border-2 border-gray-300 shadow-none",ghost:"border-transparent shadow-none"},padding:{none:"p-0",sm:"p-4",md:"p-6",lg:"p-8"}},defaultVariants:{variant:"default",padding:"md"}}),i=r.forwardRef((e,t)=>{let{className:a,variant:r,padding:i,hoverable:l,...c}=e;return(0,s.jsx)("div",{ref:t,className:n({variant:r,padding:i,className:l?"".concat(a," cursor-pointer"):a}),...c})});i.displayName="Card";let l=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:"mb-4 ".concat(t||""),...a})},c=e=>{let{className:t,...a}=e;return(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 ".concat(t||""),...a})},o=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:t,...a})}},9756:function(e,t,a){"use strict";a.d(t,{$:function(){return n}});var s=a(7437);a(2265);var r=a(1817);let n=e=>{let{size:t="md",className:a=""}=e;return(0,s.jsx)(r.Z,{className:"animate-spin ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t]," ").concat(a)})}},3227:function(e,t,a){"use strict";var s=a(3464);class r{async createAction(e){return(await this.client.post("/actions",e)).data}async approveAction(e,t){return(await this.client.post("/actions/".concat(e,"/approve"),{approved_by:t})).data}async rejectAction(e,t,a){return(await this.client.post("/actions/".concat(e,"/reject"),{rejected_by:t,reason:a})).data}async getAction(e){return(await this.client.get("/actions/".concat(e))).data}async getUserActions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(await this.client.get("/actions/user/".concat(e),{params:{limit:t,offset:a}})).data}async getActionAuditLogs(e){return(await this.client.get("/actions/".concat(e,"/audit"))).data}async getRateLimits(e,t){return(await this.client.get("/actions/rate-limits/".concat(e,"/").concat(t))).data}async rollbackAction(e,t,a){return(await this.client.post("/actions/".concat(e,"/rollback"),{rolled_back_by:t,reason:a})).data}async ragQuery(e,t,a){return(await this.client.post("/v1/rag/query",{query:e,user_id:t,filters:a})).data}async extractTasks(e,t,a){return(await this.client.post("/v1/agents/extract-tasks",{text:e,user_id:t,metadata:a})).data}async summarizeDocument(e,t,a){return(await this.client.post("/v1/agents/summarize",{document_id:e,user_id:t,style:a})).data}async draftReply(e,t,a){return(await this.client.post("/v1/agents/draft-reply",{message_id:e,user_id:t,context:a})).data}async getNodes(e){return(await this.client.get("/nodes",{params:e})).data}async createNode(e){return(await this.client.post("/nodes",e)).data}async updateNode(e,t){return(await this.client.put("/nodes/".concat(e),t)).data}async deleteNode(e){return(await this.client.delete("/nodes/".concat(e))).data}async vectorSearch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await this.client.post("/vectors/search",{query:e,limit:t})).data}async upsertVector(e){return(await this.client.post("/vectors",e)).data}async getJobs(e){return(await this.client.get("/jobs",{params:e?{status:e}:void 0})).data}async getJob(e){return(await this.client.get("/jobs/".concat(e))).data}async getEvents(e,t){return(await this.client.get("/v1/events",{params:{user_id:e,limit:(null==t?void 0:t.limit)||50,offset:(null==t?void 0:t.offset)||0,event_type:null==t?void 0:t.eventType}})).data}async createEvent(e){return(await this.client.post("/v1/events",e)).data}async getCurrentUser(){return(await this.client.get("/auth/me")).data}async logout(){let e=await this.client.post("/auth/logout");return localStorage.removeItem("auth_token"),localStorage.removeItem("lifeos_user"),e.data}constructor(){this.client=s.Z.create({baseURL:"".concat("https://recall-hub-15.preview.emergentagent.com","/api"),headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{let t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth_token"),window.location.href="/login"),Promise.reject(e)})}}let n=new r;t.Z=n}},function(e){e.O(0,[891,25,971,117,744],function(){return e(e.s=5706)}),_N_E=e.O()}]);