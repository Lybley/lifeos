(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{4539:function(e,t,r){Promise.resolve().then(r.bind(r,1938))},9205:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var a=r(2265);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:d="",children:u,iconNode:g,...h}=e;return(0,a.createElement)("svg",{ref:t,...o,width:n,height:n,stroke:r,strokeWidth:i?24*Number(s)/Number(n):s,className:c("lucide",d),...!u&&!l(h)&&{"aria-hidden":"true"},...h},[...g.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{className:l,...o}=r;return(0,a.createElement)(d,{ref:s,iconNode:t,className:c("lucide-".concat(n(i(e))),"lucide-".concat(e),l),...o})});return r.displayName=i(e),r}},2222:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},401:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9322:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8867:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},6362:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},8736:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},1817:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6980:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]])},4743:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},2369:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1938:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var a=r(7437),n=r(2265),s=r(3033),i=r(3120),c=r(9756),l=r(9322);let o=e=>{let{messages:t,onSend:r,loading:o=!1,error:d,onCitationClick:u}=e,g=(0,n.useRef)(null),[h,m]=(0,n.useState)(!0),x=()=>{h&&g.current&&g.current.scrollIntoView({behavior:"smooth"})};return(0,n.useEffect)(()=>{x()},[t]),(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-6",onScroll:e=>{let{scrollTop:t,scrollHeight:r,clientHeight:a}=e.currentTarget;m(r-t-a<100)},children:0===t.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-lg mb-2",children:"No messages yet"}),(0,a.jsx)("p",{className:"text-sm",children:"Start a conversation to get personalized insights from your data"})]})}):(0,a.jsxs)(a.Fragment,{children:[t.map(e=>(0,a.jsx)(s.J,{message:e,onCitationClick:u},e.id)),o&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(c.$,{size:"sm"}),(0,a.jsx)("span",{className:"text-sm",children:"Thinking..."})]}),(0,a.jsx)("div",{ref:g})]})}),d&&(0,a.jsxs)("div",{className:"mx-4 mb-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-800 dark:text-red-200",children:[(0,a.jsx)(l.Z,{className:"w-5 h-5 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-sm",children:d})]}),(0,a.jsx)(i.x,{onSend:r,loading:o})]})};var d=r(3227);function u(){let[e,t]=(0,n.useState)([{id:"welcome",role:"system",content:"Welcome to LifeOS Chat! Ask me anything about your data.",timestamp:new Date}]),[r,s]=(0,n.useState)(!1),[i,c]=(0,n.useState)();(0,n.useEffect)(()=>{},[]);let l=async(e,r)=>{c(void 0);let a={id:Date.now().toString(),role:"user",content:e,timestamp:new Date};t(e=>[...e,a]),s(!0);try{var n;let r=await d.Z.ragQuery(e,"user-123"),a={id:Date.now().toString()+"-ai",role:"assistant",content:r.answer||"I found some relevant information for you.",citations:null===(n=r.sources)||void 0===n?void 0:n.map(e=>{var t;return{id:e.id,title:e.title,source:e.type,snippet:(null===(t=e.content)||void 0===t?void 0:t.substring(0,150))||"",url:e.url,confidence:e.score}}),timestamp:new Date};t(e=>[...e,a])}catch(e){c(e.message||"Failed to get response. Please try again."),console.error(e)}finally{s(!1)}};return(0,a.jsx)("div",{className:"h-screen flex flex-col",children:(0,a.jsx)(o,{messages:e,onSend:l,loading:r,error:i,onCitationClick:e=>{e.url&&window.open(e.url,"_blank")}})})}},3120:function(e,t,r){"use strict";r.d(t,{x:function(){return o}});var a=r(7437),n=r(2265),s=r(6980),i=r(1817),c=r(4743),l=r(6334);let o=e=>{let{onSend:t,loading:r=!1,placeholder:o="Type your message...",allowAttachments:d=!0}=e,[u,g]=(0,n.useState)(""),[h,m]=(0,n.useState)([]),x=(0,n.useRef)(null),y=(0,n.useRef)(null),p=()=>{(u.trim()||h.length>0)&&(t(u,h.length>0?h:void 0),g(""),m([]),x.current&&(x.current.style.height="auto"))},f=()=>{x.current&&(x.current.style.height="auto",x.current.style.height="".concat(Math.min(x.current.scrollHeight,200),"px"))};return(0,a.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4",children:[h.length>0&&(0,a.jsx)("div",{className:"mb-2 flex flex-wrap gap-2",children:h.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full text-sm",children:[(0,a.jsx)(s.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{className:"max-w-[200px] truncate",children:e.name}),(0,a.jsx)("button",{onClick:()=>m(h.filter((e,r)=>r!==t)),className:"text-gray-500 hover:text-red-600",children:"\xd7"})]},t))}),(0,a.jsxs)("div",{className:"flex gap-2 items-end",children:[d&&(0,a.jsx)("button",{onClick:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.click()},className:"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",disabled:r,children:(0,a.jsx)(s.Z,{className:"w-5 h-5"})}),(0,a.jsx)("textarea",{ref:x,value:u,onChange:e=>{g(e.target.value),f()},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p())},placeholder:o,disabled:r,rows:1,className:"flex-1 resize-none rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50",style:{maxHeight:"200px"}}),(0,a.jsx)(l.z,{onClick:p,disabled:r||!u.trim()&&0===h.length,size:"md",rightIcon:r?(0,a.jsx)(i.Z,{className:"animate-spin"}):(0,a.jsx)(c.Z,{className:"w-5 h-5"}),children:"Send"}),(0,a.jsx)("input",{ref:y,type:"file",multiple:!0,onChange:e=>{e.target.files&&m(Array.from(e.target.files))},className:"hidden"})]})]})}},3033:function(e,t,r){"use strict";r.d(t,{J:function(){return h}});var a=r(7437),n=r(2265),s=r(2222),i=r(401),c=r(8867),l=r(2369),o=r(8711),d=r(8736),u=r(6362);let g=e=>{let{citation:t,onClick:r}=e,n=t.confidence?t.confidence>.8?"bg-green-100 text-green-800 border-green-300":t.confidence>.6?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-gray-100 text-gray-800 border-gray-300":"bg-blue-100 text-blue-800 border-blue-300";return(0,a.jsxs)("button",{onClick:r,className:"group inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border transition-all hover:shadow-md ".concat(n),title:t.snippet,children:[(0,a.jsx)(d.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{className:"max-w-[120px] truncate",children:t.title}),t.url&&(0,a.jsx)(u.Z,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"}),t.confidence&&(0,a.jsxs)("span",{className:"ml-1 opacity-75",children:[Math.round(100*t.confidence),"%"]})]})},h=e=>{let{message:t,onCitationClick:r}=e,[d,u]=(0,n.useState)(!1),h="user"===t.role,m="system"===t.role,x=async()=>{await navigator.clipboard.writeText(t.content),u(!0),setTimeout(()=>u(!1),2e3)};return m?(0,a.jsx)("div",{className:"flex justify-center my-4",children:(0,a.jsx)(o.C,{variant:"info",size:"sm",children:t.content})}):(0,a.jsxs)("div",{className:"flex gap-4 mb-6 ".concat(h?"justify-end":"justify-start"),children:[!h&&(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center",children:(0,a.jsx)(s.Z,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),(0,a.jsxs)("div",{className:"flex flex-col max-w-[70%] ".concat(h?"items-end":"items-start"),children:[(0,a.jsx)("div",{className:"rounded-2xl px-4 py-3 ".concat(h?"bg-primary-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white"),children:(0,a.jsx)("p",{className:"whitespace-pre-wrap break-words",children:t.content})}),t.citations&&t.citations.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:t.citations.map(e=>(0,a.jsx)(g,{citation:e,onClick:()=>null==r?void 0:r(e)},e.id))}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("span",{children:new Date(t.timestamp).toLocaleTimeString()}),!h&&(0,a.jsx)("button",{onClick:x,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",title:"Copy message",children:d?(0,a.jsx)(i.Z,{className:"w-3 h-3 text-green-600"}):(0,a.jsx)(c.Z,{className:"w-3 h-3"})})]})]}),h&&(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:(0,a.jsx)(l.Z,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})}},8711:function(e,t,r){"use strict";r.d(t,{C:function(){return n}});var a=r(7437);r(2265);let n=e=>{let{children:t,variant:r="default",size:n="sm",className:s=""}=e;return(0,a.jsx)("span",{className:"inline-flex items-center font-medium rounded-full ".concat({default:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",success:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",error:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",info:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",outline:"bg-transparent border border-gray-300 text-gray-800 dark:border-gray-600 dark:text-gray-300",secondary:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}[r]," ").concat({sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm"}[n]," ").concat(s),children:t})}},6334:function(e,t,r){"use strict";r.d(t,{z:function(){return i}});var a=r(7437),n=r(2265);let s=(0,r(2163).j)("inline-flex items-center justify-center rounded-lg font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:"bg-primary-600 text-white hover:bg-primary-700 focus-visible:ring-primary-500",secondary:"bg-secondary-200 text-secondary-900 hover:bg-secondary-300 focus-visible:ring-secondary-500",outline:"border-2 border-primary-600 text-primary-600 hover:bg-primary-50 focus-visible:ring-primary-500",ghost:"text-secondary-700 hover:bg-secondary-100 focus-visible:ring-secondary-500",danger:"bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-500",success:"bg-green-600 text-white hover:bg-green-700 focus-visible:ring-green-500"},size:{sm:"h-9 px-3 text-sm",md:"h-10 px-4 text-base",lg:"h-11 px-6 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"primary",size:"md"}}),i=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,loading:c,leftIcon:l,rightIcon:o,children:d,disabled:u,...g}=e;return(0,a.jsxs)("button",{className:s({variant:n,size:i,className:r}),ref:t,disabled:u||c,...g,children:[c&&(0,a.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-label":"Loading",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!c&&l&&(0,a.jsx)("span",{className:"mr-2",children:l}),d,!c&&o&&(0,a.jsx)("span",{className:"ml-2",children:o})]})});i.displayName="Button"},9756:function(e,t,r){"use strict";r.d(t,{$:function(){return s}});var a=r(7437);r(2265);var n=r(1817);let s=e=>{let{size:t="md",className:r=""}=e;return(0,a.jsx)(n.Z,{className:"animate-spin ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t]," ").concat(r)})}},3227:function(e,t,r){"use strict";var a=r(3464);class n{async createAction(e){return(await this.client.post("/actions",e)).data}async approveAction(e,t){return(await this.client.post("/actions/".concat(e,"/approve"),{approved_by:t})).data}async rejectAction(e,t,r){return(await this.client.post("/actions/".concat(e,"/reject"),{rejected_by:t,reason:r})).data}async getAction(e){return(await this.client.get("/actions/".concat(e))).data}async getUserActions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(await this.client.get("/actions/user/".concat(e),{params:{limit:t,offset:r}})).data}async getActionAuditLogs(e){return(await this.client.get("/actions/".concat(e,"/audit"))).data}async getRateLimits(e,t){return(await this.client.get("/actions/rate-limits/".concat(e,"/").concat(t))).data}async rollbackAction(e,t,r){return(await this.client.post("/actions/".concat(e,"/rollback"),{rolled_back_by:t,reason:r})).data}async ragQuery(e,t,r){return(await this.client.post("/v1/rag/query",{query:e,user_id:t,filters:r})).data}async extractTasks(e,t,r){return(await this.client.post("/v1/agents/extract-tasks",{text:e,user_id:t,metadata:r})).data}async summarizeDocument(e,t,r){return(await this.client.post("/v1/agents/summarize",{document_id:e,user_id:t,style:r})).data}async draftReply(e,t,r){return(await this.client.post("/v1/agents/draft-reply",{message_id:e,user_id:t,context:r})).data}async getNodes(e){return(await this.client.get("/nodes",{params:e})).data}async createNode(e){return(await this.client.post("/nodes",e)).data}async updateNode(e,t){return(await this.client.put("/nodes/".concat(e),t)).data}async deleteNode(e){return(await this.client.delete("/nodes/".concat(e))).data}async vectorSearch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await this.client.post("/vectors/search",{query:e,limit:t})).data}async upsertVector(e){return(await this.client.post("/vectors",e)).data}async getJobs(e){return(await this.client.get("/jobs",{params:e?{status:e}:void 0})).data}async getJob(e){return(await this.client.get("/jobs/".concat(e))).data}async getEvents(e,t){return(await this.client.get("/v1/events",{params:{user_id:e,limit:(null==t?void 0:t.limit)||50,offset:(null==t?void 0:t.offset)||0,event_type:null==t?void 0:t.eventType}})).data}async createEvent(e){return(await this.client.post("/v1/events",e)).data}async getCurrentUser(){return(await this.client.get("/auth/me")).data}async logout(){let e=await this.client.post("/auth/logout");return localStorage.removeItem("auth_token"),localStorage.removeItem("lifeos_user"),e.data}constructor(){this.client=a.Z.create({baseURL:"".concat("https://recall-hub-15.preview.emergentagent.com","/api"),headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{let t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("auth_token"),window.location.href="/login"),Promise.reject(e)})}}let s=new n;t.Z=s}},function(e){e.O(0,[891,971,117,744],function(){return e(e.s=4539)}),_N_E=e.O()}]);