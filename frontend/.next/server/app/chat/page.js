(()=>{var e={};e.id=929,e.ids=[929],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98632:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>l}),s(34356),s(71513),s(35866);var r=s(23191),a=s(88716),i=s(37922),n=s.n(i),o=s(95231),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(t,c);let l=["",{children:["chat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,34356)),"/app/frontend/src/app/chat/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,71513)),"/app/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/app/frontend/src/app/chat/page.tsx"],u="/chat/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/chat/page",pathname:"/chat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},8487:(e,t,s)=>{Promise.resolve().then(s.bind(s,82889))},82889:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(10326),a=s(17577),i=s(21023),n=s(91202),o=s(856),c=s(41291);let l=({messages:e,onSend:t,loading:s=!1,error:l,onCitationClick:d})=>{let u=(0,a.useRef)(null),[p,x]=(0,a.useState)(!0),h=()=>{p&&u.current&&u.current.scrollIntoView({behavior:"smooth"})};return(0,a.useEffect)(()=>{h()},[e]),(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[r.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-6",onScroll:e=>{let{scrollTop:t,scrollHeight:s,clientHeight:r}=e.currentTarget;x(s-t-r<100)},children:0===e.length?r.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg mb-2",children:"No messages yet"}),r.jsx("p",{className:"text-sm",children:"Start a conversation to get personalized insights from your data"})]})}):(0,r.jsxs)(r.Fragment,{children:[e.map(e=>r.jsx(i.J,{message:e,onCitationClick:d},e.id)),s&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[r.jsx(o.$,{size:"sm"}),r.jsx("span",{className:"text-sm",children:"Thinking..."})]}),r.jsx("div",{ref:u})]})}),l&&(0,r.jsxs)("div",{className:"mx-4 mb-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-800 dark:text-red-200",children:[r.jsx(c.Z,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("p",{className:"text-sm",children:l})]}),r.jsx(n.x,{onSend:t,loading:s})]})};var d=s(73002);function u(){let[e,t]=(0,a.useState)([{id:"welcome",role:"system",content:"Welcome to LifeOS Chat! Ask me anything about your data.",timestamp:new Date}]),[s,i]=(0,a.useState)(!1),[n,o]=(0,a.useState)(),c=async(e,s)=>{o(void 0);let r={id:Date.now().toString(),role:"user",content:e,timestamp:new Date};t(e=>[...e,r]),i(!0);try{let s=await d.Z.ragQuery(e,"user-123"),r={id:Date.now().toString()+"-ai",role:"assistant",content:s.answer||"I found some relevant information for you.",citations:s.sources?.map(e=>({id:e.id,title:e.title,source:e.type,snippet:e.content?.substring(0,150)||"",url:e.url,confidence:e.score})),timestamp:new Date};t(e=>[...e,r])}catch(e){o(e.message||"Failed to get response. Please try again."),console.error(e)}finally{i(!1)}};return r.jsx("div",{className:"h-screen flex flex-col",children:r.jsx(l,{messages:e,onSend:c,loading:s,error:n,onCitationClick:e=>{e.url&&window.open(e.url,"_blank")}})})}},73002:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(94464);class a{constructor(){this.client=r.Z.create({baseURL:"http://localhost:8000/api",headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>e,e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,e=>(e.response?.status,Promise.reject(e)))}async createAction(e){return(await this.client.post("/actions",e)).data}async approveAction(e,t){return(await this.client.post(`/actions/${e}/approve`,{approved_by:t})).data}async rejectAction(e,t,s){return(await this.client.post(`/actions/${e}/reject`,{rejected_by:t,reason:s})).data}async getAction(e){return(await this.client.get(`/actions/${e}`)).data}async getUserActions(e,t=50,s=0){return(await this.client.get(`/actions/user/${e}`,{params:{limit:t,offset:s}})).data}async getActionAuditLogs(e){return(await this.client.get(`/actions/${e}/audit`)).data}async getRateLimits(e,t){return(await this.client.get(`/actions/rate-limits/${e}/${t}`)).data}async rollbackAction(e,t,s){return(await this.client.post(`/actions/${e}/rollback`,{rolled_back_by:t,reason:s})).data}async ragQuery(e,t,s){return(await this.client.post("/v1/rag/query",{query:e,user_id:t,filters:s})).data}async extractTasks(e,t,s){return(await this.client.post("/v1/agents/extract-tasks",{text:e,user_id:t,metadata:s})).data}async summarizeDocument(e,t,s){return(await this.client.post("/v1/agents/summarize",{document_id:e,user_id:t,style:s})).data}async draftReply(e,t,s){return(await this.client.post("/v1/agents/draft-reply",{message_id:e,user_id:t,context:s})).data}async getNodes(e){return(await this.client.get("/nodes",{params:e})).data}async createNode(e){return(await this.client.post("/nodes",e)).data}async updateNode(e,t){return(await this.client.put(`/nodes/${e}`,t)).data}async deleteNode(e){return(await this.client.delete(`/nodes/${e}`)).data}async vectorSearch(e,t=10){return(await this.client.post("/vectors/search",{query:e,limit:t})).data}async upsertVector(e){return(await this.client.post("/vectors",e)).data}async getJobs(e){return(await this.client.get("/jobs",{params:e?{status:e}:void 0})).data}async getJob(e){return(await this.client.get(`/jobs/${e}`)).data}async getEvents(e,t){return(await this.client.get("/v1/events",{params:{user_id:e,limit:t?.limit||50,offset:t?.offset||0,event_type:t?.eventType}})).data}async createEvent(e){return(await this.client.post("/v1/events",e)).data}}let i=new a},34356:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/app/frontend/src/app/chat/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,218,52,632],()=>s(98632));module.exports=r})();